<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Ezequiel Abregu</title>
    <!-- Css -->
    <link href="css/bootstrap.css" rel="stylesheet" />
    <link href="css/style.css" rel="stylesheet" />
    <link href="css/lightbox.css" rel="stylesheet" type="text/css" media="all" />
    <link rel="stylesheet" href="css/style.css">
    <script src="https://unpkg.com/wavesurfer.js"></script> <!-- Wavesurfer library-->
    <link rel="icon" href="img/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    
    <link rel="stylesheet" href="dist/css/main.min.css">
    <script src="dist/js/app.js"></script>

   </head>
  <body>
    <div class="col-md-12">
      <nav class="navbar navbar-default color-fill navbar-fixed-top">
        <div class="nav"></div>

        <a class="navbar-brand" href="index.html">
          <!-- <img class="logo" src="img/logo.png" alt="logo"> -->
          <h4>EZEQUIEL ABREGU</h4>
         <!-- section indicator-->
         <div id="page-indicator">WORKS</div> 
         <div id="section-indicator"></div>   
        </a>

        <div id="fixed-navbar">
            <!-- <a class="nav-item" href="portfolio.html">works</a> -->
            <a class="nav-item active" href="portfolio.html" data-text="works"><i class="bi bi-grid-3x3-gap"></i></a>
            <!-- <a class="nav-item active" href="about.html">ABOUT</a> -->
            <a class="nav-item" href="about.html" data-text="about"><i class="bi bi-info-circle"></i></a>
            <!-- <a class="nav-item" href="audio.html">audio</a> -->
            <a class="nav-item" href="audio.html" data-text="audio"><i class="bi bi-soundwave"></i></a>               
            <!-- <a class="nav-item" href="research.html">text</a> -->
            <a class="nav-item" href="research.html" data-text="text"><i class="bi bi-file-text"></i></a>               
            <!-- <a class="nav-item" href="links.html">links</a> -->
            <a class="nav-item" href="links.html" data-text="links"><i class="bi bi-link-45deg"></i></a>               
            <!-- <a class="nav-item" href="https://github.com/ezequielabregu?tab=repositories" target="_blank">code</a> -->
            <a class="nav-item" href="https://github.com/ezequielabregu?tab=repositories" target="_blank" data-text="code"><i class="bi bi-code-slash"></i></a>                          
        </div>
      </nav>
      <!-- Collapsed navbar -->
      <nav id="collapsed-navbar" class="navbar navbar-default navbar-fixed-top">
        <!-- Rest of the navbar code -->
        <div class="container"></div>
        <div class="nav">
          <button class="btn-nav">
            <span class="icon-bar inverted top"></span>
            <span class="icon-bar inverted middle"></span>
            <span class="icon-bar inverted bottom"></span>
          </button>
        </div>
        <a class="navbar-brand" href="index.html">
          <!-- <img class="logo" src="img/logo.png" alt="logo"> -->
        </a>
        <div class="nav-content hideNav hidden">
          <ul class="nav-list vcenter">
            <li class="nav-item active"><a class="item-anchor" href="portfolio.html">works</a><i class="bi bi-grid-3x3-gap"></i></li>
            <li class="nav-item"><a class="item-anchor" href="about.html">about</a><i class="bi bi-info-circle"></i></li>
            <li class="nav-item"><a class="item-anchor" href="audio.html">audio</a><i class="bi bi-soundwave"></i></li>
            <li class="nav-item"><a class="item-anchor" href="research.html">text </a><i class="bi bi-file-text"></i></li>
            <li class="nav-item"><a class="item-anchor" href="links.html">links</a><i class="bi bi-link-45deg"></i></li>
            <li class="nav-item"><a class="item-anchor" href="https://github.com/ezequielabregu?tab=repositories" target="_blank">code </a><i class="bi bi-code-slash"></i></li>
          </ul>
        </div>
      </nav>

      <section id="portfolio">
         <div class="container">
<!--             <ul class="portfolio-sorting list-inline text-center">
               <li><a href="#" data-group="all" class="active">All</a>
               </li>
               <li><a href="#" data-group="sound">Sound</a>
               </li>
               <li><a href="#" data-group="music">Music</a>
               </li>
               <li><a href="#" data-group="performance">Performance</a>
               </li>
               <li><a href="#" data-group="digital">Digital</a>
               </li>
            </ul> -->
            <div class="row">
               <div class="col-sm-12">
                  <div class="lightbox-grid square-thumbs" data-gallery-title="Gallery">
                     <ul class="portfolio-items list-unstyled" id="grid">
                        <li class="col-md-4 col-sm-12 col-xs-12 no-gutter" data-groups='["digital", "performance"]'>
                           
                              <div id="myModal" class="modal">
                                 <!-- Modal content -->
                                 <div class="modal-content">
                                   <div class="close-button">
                                     <span class="close">&times;</span>
                                   </div>
                                   <div id="modal-content"></div>
                                 </div>
                               </div>
                                                      
                              <a href="#eat-to-look-inside" class="myImg">
                              <div class="background-image-holder">
                                 <img alt="portfolio" class="background-image" src="img/gallery/eattolookinside.jpg" />
                                 <p class="image-caption">EAT TO LOOK INSIDE</p>
                              </div>
                              </a>
                        </li>

                        <li class="col-md-4 col-sm-12 col-xs-12 no-gutter" data-groups='["performance", "sound"]'>
                           
                           <div id="myModal" class="modal">
                              <!-- Modal content -->
                              <div class="modal-content">
                                <div class="close-button">
                                  <span class="close">&times;</span>
                                </div>
                                <div id="modal-content"></div>
                              </div>
                            </div>

                           <a href="#one-line" class="myImg">
                              <div class="background-image-holder">
                                 <img alt="portfolio" class="background-image" src="img/gallery/oneline.jpg" />
                                 <p class="image-caption">ONE LINE</p>
                              </div>
                           </a>
                        </li>

                        <li class="col-md-4 col-sm-12 col-xs-12 no-gutter" data-groups='["performance"]'>

                           <div id="myModal" class="modal">
                              <!-- Modal content -->
                              <div class="modal-content">
                                <div class="close-button">
                                  <span class="close">&times;</span>
                                </div>
                                <div id="modal-content"></div>
                              </div>
                            </div>

                           <a href="#the-artificial-grandparents" class="myImg">
                              <div class="background-image-holder">
                                 <img alt="portfolio" class="background-image" src="img/gallery/abuelos.png" />
                                 <p class="image-caption">THE ARTIFICIAL GRANPARENTS</p>
                              </div>
                           </a>
                        </li>
                        
                        <li class="col-md-4 col-sm-12 col-xs-12 no-gutter" data-groups='["music", "sound"]'>

                           <div id="myModal" class="modal">
                              <!-- Modal content -->
                              <div class="modal-content">
                                <div class="close-button">
                                  <span class="close">&times;</span>
                                </div>
                                <div id="modal-content"></div>
                              </div>
                            </div>

                           <a href="#urban-bosque" class="myImg">
                              <div class="background-image-holder">
                                 <img alt="portfolio" class="background-image" src="img/gallery/urbanbosque.jpg" />
                                 <p class="image-caption">URBAN BOSQUE</p>
                              </div>
                           </a>
                        </li>

                        <li class="col-md-4 col-sm-12 col-xs-12 no-gutter" data-groups='["music"]'>

                           <div id="myModal" class="modal">
                              <!-- Modal content -->
                              <div class="modal-content">
                                <div class="close-button">
                                  <span class="close">&times;</span>
                                </div>
                                <div id="modal-content"></div>
                              </div>
                            </div>

                           <a href="#mute" class="myImg">
                              <div class="background-image-holder">
                                 <img alt="portfolio" class="background-image" src="img/gallery/mute.jpg" />
                                 <p class="image-caption">MUTE</p>
                              </div>
                           </a>
                        </li>

                        <li class="col-md-4 col-sm-12 col-xs-12 no-gutter" data-groups='["music"]'>

                           <div id="myModal" class="modal">
                              <!-- Modal content -->
                              <div class="modal-content">
                                <div class="close-button">
                                  <span class="close">&times;</span>
                                </div>
                                <div id="modal-content"></div>
                              </div>
                            </div>

                           <a href="#500k" class="myImg">
                              <div class="background-image-holder">
                                 <img alt="portfolio" class="background-image" src="img/gallery/500k.jpg" />
                                 <p class="image-caption">500K</p>
                              </div>
                           </a>
                        </li>

                        <li class="col-md-4 col-sm-12 col-xs-12 no-gutter" data-groups='["sound"]'>

                           <div id="myModal" class="modal">
                              <!-- Modal content -->
                              <div class="modal-content">
                                <div class="close-button">
                                  <span class="close">&times;</span>
                                </div>
                                <div id="modal-content"></div>
                              </div>
                            </div>

                           <a href="#chrysalis" class="myImg">
                              <div class="background-image-holder">
                                 <img alt="portfolio" class="background-image" src="img/gallery/crisalida.jpg" />
                                 <p class="image-caption">CHRYSALIS</p>
                              </div>
                           </a>
                        </li>

                        <li class="col-md-4 col-sm-12 col-xs-12 no-gutter" data-groups='["performance"]'>

                           <div id="myModal" class="modal">
                              <!-- Modal content -->
                              <div class="modal-content">
                                <div class="close-button">
                                  <span class="close">&times;</span>
                                </div>
                                <div id="modal-content"></div>
                              </div>
                            </div>

                           <a href="#lejos" class="myImg">
                              <div class="background-image-holder">
                                 <img alt="portfolio" class="background-image" src="img/gallery/lejos.jpg" />
                                 <p class="image-caption">LEJOS</p>
                              </div>
                           </a>
                        </li>

						<li class="col-md-4 col-sm-12 col-xs-12 no-gutter" data-groups='["performance"]'>

                     <div id="myModal" class="modal">
                        <!-- Modal content -->
                        <div class="modal-content">
                          <div class="close-button">
                            <span class="close">&times;</span>
                          </div>
                          <div id="modal-content"></div>
                        </div>
                      </div>

                           <a href="#los-viajes-de-sarmiento" class="myImg">
                              <div class="background-image-holder">
                                 <img alt="portfolio" class="background-image" src="img/gallery/viajes.jpg" />
                                 <p class="image-caption">SARMIENTO'S JOURNEYS</p>
                              </div>
                           </a>
                        </li>

                        <li class="col-md-4 col-sm-12 col-xs-12 no-gutter" data-groups='["sound"]'>

                           <div id="myModal" class="modal">
                              <!-- Modal content -->
                              <div class="modal-content">
                                <div class="close-button">
                                  <span class="close">&times;</span>
                                </div>
                                <div id="modal-content"></div>
                              </div>
                            </div>

                           <a href="#bowl-of-secrets" class="myImg">
                              <div class="background-image-holder">
                                 <img alt="portfolio" class="background-image" src="img/gallery/bucaro.jpg" />
                                 <p class="image-caption">BOWL OF SECRETS</p>
                              </div>
                           </a>
                        </li>

                        <li class="col-md-4 col-sm-12 col-xs-12 no-gutter" data-groups='["music"]'>

                           <div id="myModal" class="modal">
                              <!-- Modal content -->
                              <div class="modal-content">
                                <div class="close-button">
                                  <span class="close">&times;</span>
                                </div>
                                <div id="modal-content"></div>
                              </div>
                            </div>

                           <a href="#two-pieces-for-ensemble" class="myImg">
                              <div class="background-image-holder">
                                 <img alt="portfolio" class="background-image" src="img/gallery/oceanos.jpg" />
                                 <p class="image-caption">TWO PIECES FOR ENSEMBLE</p>
                              </div>
                           </a>
                        </li>

                        <li class="col-md-4 col-sm-12 col-xs-12 no-gutter" data-groups='["sound"]'>

                           <div id="myModal" class="modal">
                              <!-- Modal content -->
                              <div class="modal-content">
                                <div class="close-button">
                                  <span class="close">&times;</span>
                                </div>
                                <div id="modal-content"></div>
                              </div>
                            </div>

                           <a href="#imaginarios-de-barrio" class="myImg">
                              <div class="background-image-holder">
                                 <img alt="portfolio" class="background-image" src="img/gallery/imaginarios.jpg" />
                                 <p class="image-caption">IMAGINARIOS DE BARRIO</p>
                              </div>
                           </a>
                        </li>

                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </section>


    </div>


    <!-- script -->
    <script src="js/jquery.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/lightbox-plus-jquery.js"></script>
    <script src="js/jquery.shuffle.min.js"></script>
    <script src="js/modernizr.js"></script>
    <script src="js/script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked@2.0.0/marked.min.js"></script> <!-- Markdown marked library-->
    <script src="https://unpkg.com/wavesurfer.js"></script> <!-- Wavesurfer library-->

    <!-- include Markdown file script-->
    <!-- <div id="markdown-content"></div> -->
<!--     <script>
      fetch('content/works.md')
        .then(response => response.text())
        .then(text => {
          const html = marked(text, { sanitize: false });
          document.getElementById('markdown-content').innerHTML = html;
        });
    </script> -->


   <!-- Wavesurfer legacy script, works ok when I display the wavesurfer on portfolio.hmtl. It doesn't work with modals -->
<!--    <script>
      fetch('content/works.md')
      .then(response => response.text())
      .then(text => {
         const html = marked(text, { sanitize: false });
         document.getElementById('markdown-content').innerHTML = html;
   
         // Initialize WaveSurfer after the Markdown content has been loaded
         var wavesurfer = WaveSurfer.create({
            container: '#waveform',
            waveColor: '#666',
            progressColor: '#759784'
         });
   
         // Load an audio file
         wavesurfer.load('audio/bucaro_mastered.mp3');

         // Add click event listener to the waveform
         document.getElementById('waveform').addEventListener('click', function() {
            wavesurfer.playPause();
         });
      });
   </script> -->

<!-- Wavesurfer script for modals-->
<!--This is the prompt to get this: I have a markdown file (works.md) that contains sections with h2 tags and id attributes. Each section contains a #waveform element. I'm using images with href attributes to open a modal and display the content of a section. The href attribute value of an image corresponds to the id of the section that should be displayed in the modal. I want to initialize WaveSurfer when a modal is opened, and the #waveform element is added to the DOM. How can I modify my script to achieve this? -->
<script>
   // Get all images and add onclick event to each
   var imgs = document.querySelectorAll('.myImg');
   imgs.forEach(img => {
     img.onclick = function(){
       var modal = document.getElementById("myModal");
       modal.style.display = "block";
       
       // Get the href attribute value (the id of the section)
       var sectionId = this.getAttribute('href').substring(1);
       
       // Parse the HTML
       var parser = new DOMParser();
       var doc = parser.parseFromString(html, 'text/html');
       
       // Get the content of the section
       var sectionContent = getSectionContent(doc.body, 'h2[id="' + sectionId + '"]');
       
       // Insert the content into the modal
       document.getElementById('modal-content').innerHTML = sectionContent;
   
       // Delay the scroll to the top until after the new content is rendered
       setTimeout(function() {
         modal.scrollTop = 0;
   
         // Initialize WaveSurfer with the MediaElement backend
         var wavesurfer = WaveSurfer.create({
            container: '#waveform',
            waveColor: '#666',
            progressColor: '#759784',
            backend: 'MediaElement'
         });

         // Pre-generated peaks
         var peaks = [0.5, -0.3, 1, -0.7, 0.6, -0.4, 0.8, -0.6, 0.7, -0.5];

         // Load an audio file with pre-generated peaks
         wavesurfer.load('audio/bucaro_mastered.mp3', peaks);
   
         // Add click event listener to the waveform
         document.getElementById('waveform').addEventListener('click', function() {
           wavesurfer.playPause();
         });
       }, 0);
   
       // Get the <div> element that closes the modal
       var closeButton = document.getElementsByClassName("close-button")[0];
   
       // When the user clicks or touches on <div> (x), close the modal
       closeButton.addEventListener('click', closeModal);
       closeButton.addEventListener('touchstart', closeModal);
   
       function closeModal(event) {
         event.preventDefault();
         event.stopPropagation();
         modal.style.display = "none";
         // Remove the event listeners to avoid multiple event handlers being attached
         closeButton.removeEventListener('click', closeModal);
         closeButton.removeEventListener('touchstart', closeModal);
       }
     }
   });
   
   // Close the modal when clicking outside of it
   window.onclick = function(event) {
     if (event.target == modal) {
       modal.style.display = "none";
     }
   }
   
   // Function to get the content of a section
   function getSectionContent(parent, selector) {
     var startElement = parent.querySelector(selector);
     var endElement = startElement.nextElementSibling;
     while (endElement && endElement.tagName !== 'H2') {
       endElement = endElement.nextElementSibling;
     }
     var sectionContent = '';
     var element = startElement;
     while (element && element !== endElement) {
       sectionContent += element.outerHTML;
       element = element.nextElementSibling;
     }
     return sectionContent;
   }
   </script>


   </body>

   <div id="fixed-footer">
    <div>
       <a href="https://www.instagram.com/ezequielabreguok/" target="_blank"><i class="bi bi-instagram"></i></a>
       <a href="https://www.youtube.com/channel/UCBbeoTECWh6l4FYUmBs7YQA?view_as=subscriber" target="_blank"><i class="bi bi-youtube"></i></a>
       <a href="https://www.facebook.com/ezequiel.abregu.77" target="_blank"><i class="bi bi-facebook"></i></a>
       <a href="https://github.com/ezequielabregu?tab=repositories" target="_blank"><i class="bi bi-github"></i></a>
       <a href="mailto:ezequielabregu@gmail.com"><i class="bi bi-envelope"></i></a>
   </div>
    <div>
        <p>©2024 Ezequiel Abregu |Sound|Art|Code|Research|</p>
    </div>
</div>

  
  
</html>

